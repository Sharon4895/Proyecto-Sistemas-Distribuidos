<div class="fade-in max-w-6xl mx-auto">
    
    <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
        <div>
            <button routerLink="/client/dashboard" class="mb-2 text-gray-500 hover:text-blue-600 flex items-center gap-2 font-medium transition-colors">
                <i class="pi pi-arrow-left"></i> Volver al Dashboard
            </button>
            <h1 class="text-3xl font-bold text-gray-800">Historial de Movimientos</h1>
            <p class="text-gray-500">Consulta el detalle de todas tus operaciones</p>
        </div>
        
        
    </div>

    <div class="card bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden p-4">
        
        <p-table 
            [value]="transactions" 
            [loading]="loading"  [paginator]="true" 
            [rows]="5" 
            [tableStyle]="{ 'min-width': '50rem' }"
            [rowsPerPageOptions]="[5, 10, 20]"
            styleClass="p-datatable-striped">
            
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="date" style="width:20%">Fecha <p-sortIcon field="date"></p-sortIcon></th>
                    <th style="width:15%">Tipo</th>
                    <th style="width:30%">Descripción</th>
                    <th pSortableColumn="amount" style="width:20%">Monto <p-sortIcon field="amount"></p-sortIcon></th>
                    <th style="width:15%">Estado</th>
                </tr>
            </ng-template>
            
            <ng-template pTemplate="body" let-txn>
                <tr>
                    <td>
                        <span class="font-semibold text-gray-700">{{ txn.date | date:'dd MMM yyyy' }}</span>
                        <div class="text-xs text-gray-400">{{ txn.date | date:'shortTime' }}</div>
                    </td>
                    
                    <td>
                        <p-tag 
                            [value]="txn.type === 'DEPOSIT' ? 'DEPÓSITO' : 
                                     txn.type === 'WITHDRAWAL' ? 'RETIRO' : 
                                     txn.type === 'TRANSFER_SENT' ? 'ENVÍO' : 'RECEPCIÓN'" 
                            [severity]="getSeverity(txn.type)"
                            [rounded]="true">
                        </p-tag>
                    </td>
                    
                    <td class="text-gray-600">{{ txn.description }}</td>
                    
                    <td class="font-bold text-lg" 
                        [ngClass]="{'text-green-600': txn.type === 'DEPOSIT' || txn.type === 'TRANSFER_RECEIVED', 
                                    'text-red-600': txn.type === 'WITHDRAWAL' || txn.type === 'TRANSFER_SENT'}">
                        
                        {{ txn.type === 'WITHDRAWAL' || txn.type === 'TRANSFER_SENT' ? '-' : '+' }} 
                        {{ txn.amount | currency:'MXN' }}
                    </td>
                    
                    <td>
                        <i class="pi" 
                           [ngClass]="{
                               'pi-check-circle text-green-500': txn.status === 'COMPLETED', 
                               'pi-times-circle text-red-500': txn.status === 'FAILED',
                               'pi-spin pi-spinner text-yellow-500': txn.status === 'PENDING'
                           }">
                        </i>
                        <span class="ml-2 text-sm">{{ txn.status }}</span>
                    </td>
                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="5" class="text-center p-6 text-gray-500">
                        No se encontraron transacciones recientes.
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>